<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
    <style>

    .tab-panel{
        border:1px solid #ccc;
        padding:10px;
    }
    .tab-panel a{
        margin-right:5px;
    }
    </style>
   <script src="jquery.min.js"></script>
</head>
<body>
  
    <input type="text" data-citybox="true">  <input type="button" value="search">

    <script>
     $(function(){

         CITYBOX($('[data-citybox]'));
     })

    </script>


    <script>
      !function(){

          window['city_data']=
          [["AKU","阿克苏","A"],
            ["AAT","阿勒泰","A"],
            ["AKA","安康","A"],
            ["AQG","安庆","A"],
            ["AOG","鞍山","A"],
            ["BSD","保山","B"],
            ["BAV","包头","B"],
            ["BHY","北海","B"],
            ["PEK","北京","B"],
            ["BFU","蚌埠","B"],
            ["CGQ","长春","C"],
            ["CGD","常德","C"],
            ["CSX","长沙","C"],
            ["CIH","长治","C"],
            ["CZX","常州","C"],
            ["CHG","朝阳","C"],
            ["CTU","成都","C"],
            ["CIF","赤峰","C"],
            ["CKG","重庆","C"],
            ["DAX","达县","D"],
            ["DLC","大连","D"],
            ["DLU","大理","D"],
            ["DDG","丹东","D"],
            ["DAT","大同","D"],
            ["DNH","敦煌","D"],
            ["ENH","恩施","E"],
            ["FUG","阜阳","F"],
            ["FYN","富蕴","F"],
            ["FOC","福州","F"],
            ["KOW","赣州","G"],
            ["GOQ","格尔木","G"],
            ["GHN","广汉","G"],
            ["GYS","广元","G"],
            ["CAN","广州","G"],
            ["KWL","桂林","G"],
            ["KWE","贵阳","G"],
            ["HRB","哈尔滨","H"],
            ["HAK","海口","H"],
            ["HLD","海拉尔","H"],
            ["HMI","哈密","H"],
            ["HGH","杭州","H"],
            ["HZG","汉中","H"],
            ["HFE","合肥","H"],
            ["HEK","黑河","H"],
            ["HNY","衡阳","H"],
            ["HTN","和田","H"],
            ["HKG","香港","H"],
            ["TXN","黄山","H"],
            ["HYN","台州","T"],
            ["HET","呼和浩特","H"],
            ["KNC","吉安","J"],
            ["JMU","佳木斯","J"],
            ["JGN","嘉峪关","J"],
            ["JIL","吉林","J"],
            ["TNA","济南","J"],
            ["JNG","济宁","J"],
            ["JDZ","景德镇","J"],
            ["JHG","西双版纳","X"],
            ["JJN","晋江","J"],
            ["JNZ","锦州","J"],
            ["CHW","酒泉","J"],
            ["JIU","九江","J"],
            ["JZH","九寨沟","J"],
            ["KHG","喀什","K"],
            ["KRL","库尔勒","K"],
            ["KMG","昆明","K"],
            ["KCA","库车","K"],
            ["LHW","兰州","L"],
            ["LXA","拉萨","L"],
            ["LYG","连云港","L"],
            ["LJG","丽江","L"],
            ["LYI","临沂","L"],
            ["LZH","柳州","L"],
            ["LYA","洛阳","L"],
            ["LZO","泸州","L"],
            ["MFM","澳门","M"],
            ["LUM","芒市","M"],
            ["MXZ","梅县","M"],
            ["MIG","绵阳","M"],
            ["MDG","牡丹江","M"],
            ["KHN","南昌","N"],
            ["NAO","南充","N"],
            ["NKG","南京","N"],
            ["NNG","南宁","N"],
            ["NTG","南通","N"],
            ["NNY","南阳","N"],
            ["NGB","宁波","N"],
            ["IQM","且末","Q"],
            ["TAO","青岛","Q"],
            ["IQN","庆阳","Q"],
            ["SHP","秦皇岛","Q"],
            ["NDG","齐齐哈尔","Q"],
            ["JUZ","衢州","Q"],
            ["SYX","三亚","S"],
            ["SHA","上海","S"],
            ["ICX","龙岩","l"],
            ["SWA","汕头","S"],
            ["SHS","沙市","S"],
            ["SZX","深圳","S"],
            ["SJW","石家庄","S"],
            ["SYM","思茅","S"],
            ["SZV","苏州","S"],
            ["TCG","塔城","T"],
            ["TYN","太原","T"],
            ["TSN","天津","T"],
            ["TNH","通化","T"],
            ["TGO","通辽","T"],
            ["TEN","铜仁","T"],
            ["WXN","万县","W"],
            ["WEF","潍坊","W"],
            ["WEH","威海","W"],
            ["WNZ","温州","W"],
            ["WUH","武汉","W"],
            ["HLH","乌兰浩特","W"],
            ["WUX","无锡","W"],
            ["URC","乌鲁木齐","W"],
            ["WUS","武夷山","W"],
            ["WUZ","梧州","W"],
            ["XMN","厦门","X"],
            ["XIY","西安","X"],
            ["XFN","襄阳","X"],
            ["XIC","西昌","X"],
            ["XIL","锡林浩特","X"],
            ["XNN","西宁","X"],
            ["XUZ","徐州","X"],
            ["ENY","延安","Y"],
            ["YNJ","延吉","Y"],
            ["YNT","烟台","Y"],
            ["YBP","宜宾","Y"],
            ["YIH","宜昌","Y"],
            ["INC","银川","Y"],
            ["YIN","伊宁","Y"],
            ["YIW","义乌","Y"],
            ["UYN","榆林","Y"],
            ["ZAT","昭通","Z"],
            ["DYG","张家界","Z"],
            ["ZHA","湛江","Z"],
            ["DIG","迪庆","D"],
            ["CGO","郑州","Z"],
            ["HSN","舟山","Z"],
            ["ZUH","珠海","Z"],
            ["ZYI","遵义","Z"],
            ["YCU","运城","Y"],
            ["NZH","满洲里","M"],
            ["WUA","乌海","W"],
            ["SHE","沈阳","S"],
            ["LNJ","临沧","L"],
            ["DOY","东营","D"],
            ["BFJ","毕节","b"],
            ["PZI","攀枝花","P"],
            ["WNH","文山","W"],
            ["YNZ","盐城","Y"],
            ["HJJ","芷江","Z"],
            ["LCX","龙岩","L"],
            ["KRY","克拉玛依","K"],
            ["LZY","林芝","L"],
            ["JGS","井冈山","J"],
            ["HDG","邯郸","H"],
            ["DSN","鄂尔多斯","E"],
            ["ACX","兴义","X"],
            ["LLF","永州","Y"],
            ["BPX","邦达","B"],
            ["THQ","天水","T"],
            ["OHE","漠河","M"],
            ["NBS","长白山","C"],
            ["DQA","大庆","D"],
            ["JXA","鸡西","J"],
            ["LDS","伊春","Y"],
            ["FUO","佛山","F"],
            ["TCZ","腾冲","T"],
            ["ZHY","中卫","Z"],
            ["YUS","玉树","Y"],
            ["ERL","二连浩特","E"],
            ["HIA","淮安","H"],
            ["TVS","唐山","T"],
            ["KJI","噶纳斯","K"],
            ["NLT","那拉提","N"],
            ["NGQ","阿里","A"],
            ["HX","香港航空","H"],
            ["BPL","博乐","B"],
            ["AVA","安顺","A"],
            ["JIC","金昌","j"],
            ["GYU","固原","G"],
            ["RLK","巴彦淖尔","B"],
            ["YTY","扬州","Y"],
            ["YIE","阿尔山","A"],
            ["jiq","黔江","Q"],
            ["JGD","加格达","J"],
            ["JUH","九华山","j"],
            ["YIC","宜春","Y"],
            ["YZY","张掖","z"],
            ["AEB","百色","b"],
            ["LLV","吕梁","l"],
            ["ZQZ","张家口","z"]]

      }()

      !function(){
         

            var defauls={
                gt:'<div id="{group}" class="tab-panel">{lettess}</div>',
                lt:' <div ><span>{letter}</span><div>{citys}</div></div>',
                ct:'<a href="">{city}</a>',
                tt:'<li><a href="">{group}</a></li>',
                box:'<div class="citybox"><ul class="tabs"></ul><div class="tab-panels"></div></div>',
                group:['ABCD','EFGH','JKLM','NOPQRS','TUWVX','YZ']
            }

            var $tabs,$panels,citys;

            function _citybox(ele){
                    $(ele).click(function(){
                        init();
                    });
            }

            function init(){
                if($('.citybox').length>0)
                    return;
                $('body').append(defauls.box);
                $tabs=$('.tabs');
                $panels=$('.tab-panels');
                citys=getGroup();
                doHtml();
            }

            function getGroup(){
                var arr=[];
                window['city_data'].forEach(function(item){
                    if(!arr[item[2]]){
                         arr[item[2]]=[];
                    } 
                    arr[item[2]].push(item);   
                })
                return arr;
            }


            function renderLetter(item){
                var html='';
                item.split('').forEach(function(litem){
                   html+=defauls.lt.replace(/\{letter\}/,litem).replace(/\{citys\}/,renderCity(litem));
                });
                return html;
            }

            function renderCity(item){
                var html='';
                if(citys[item]){
                     citys[item].forEach(function(sitem){
                        html+=defauls.ct.replace(/\{city\}/,sitem[1]);
                    });
                }
               
                return html;
            }



            function doHtml(){
                var thtml='',phtml='';
                defauls.group.forEach(function(item){
                  phtml+=defauls.gt.replace(/\{group\}/g,item).replace(/\{lettess\}/,renderLetter(item));
                  thtml+=defauls.tt.replace(/\{group\}/g,item);
              });
              $tabs.html(thtml);
              $panels.html(phtml);
            }

            window['CITYBOX']=_citybox;
      }();

    </script>
</body>
</html>